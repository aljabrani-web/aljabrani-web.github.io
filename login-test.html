<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background: #f8f9fa;
            padding: 20px;
            direction: rtl;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .test-header {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 2rem;
            text-align: center;
        }
        .test-content {
            padding: 2rem;
        }
        .test-section {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .test-result {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 8px;
            border-right: 4px solid #6c757d;
        }
        .test-result.success {
            background: #d4edda;
            border-right-color: #28a745;
        }
        .test-result.error {
            background: #f8d7da;
            border-right-color: #dc3545;
        }
        .test-result.warning {
            background: #fff3cd;
            border-right-color: #ffc107;
        }
        .test-icon {
            font-size: 1.5rem;
            width: 40px;
            text-align: center;
        }
        .test-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 0.5rem;
            transition: all 0.3s ease;
        }
        .test-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        .credentials-box {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h1>
            <p>ÙØ­Øµ Ø´Ø§Ù…Ù„ Ù„Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆÙ†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©</p>
        </div>
        
        <div class="test-content">
            <div class="credentials-box">
                <h3>ğŸ”‘ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©:</h3>
                <p><strong>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</strong> admin</p>
                <p><strong>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</strong> admin123</p>
            </div>
            
            <div class="test-section">
                <h3>ğŸ” Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</h3>
                <button class="test-btn" onclick="testLoginForm()">Ø§Ø®ØªØ¨Ø§Ø± Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                <button class="test-btn" onclick="testAuthSystem()">Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©</button>
                <button class="test-btn" onclick="testCredentials()">Ø§Ø®ØªØ¨Ø§Ø± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                <button class="test-btn" onclick="testSession()">Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª</button>
                
                <div id="test-results">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                </div>
            </div>
            
            <div class="test-section">
                <h3>ğŸ”— Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h3>
                <button class="test-btn" onclick="openLogin()">ÙØªØ­ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                <button class="test-btn" onclick="openDashboard()">ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
                <button class="test-btn" onclick="clearSession()">Ù…Ø³Ø­ Ø§Ù„Ø¬Ù„Ø³Ø©</button>
            </div>
            
            <div class="test-section">
                <h3>ğŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                <div id="system-info">
                    <div class="code-block" id="system-details">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ù†Ø¸Ø§Ù… Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        class LoginTester {
            constructor() {
                this.baseUrl = window.location.origin;
                this.init();
            }
            
            init() {
                this.loadSystemInfo();
            }
            
            async testLoginForm() {
                this.addTestResult('Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...', 'warning');
                
                try {
                    // ÙØ­Øµ ÙˆØ¬ÙˆØ¯ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    const response = await fetch('./login.html');
                    if (!response.ok) {
                        this.addTestResult('âŒ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©', 'error');
                        return;
                    }
                    
                    const html = await response.text();
                    
                    // ÙØ­Øµ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
                    const checks = [
                        { name: 'Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„', test: html.includes('<form') && html.includes('id="loginForm"') },
                        { name: 'Ø­Ù‚Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…', test: html.includes('id="username"') },
                        { name: 'Ø­Ù‚Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±', test: html.includes('id="password"') },
                        { name: 'Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„', test: html.includes('type="submit"') },
                        { name: 'Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©', test: html.includes('AdminAuth') },
                        { name: 'Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', test: html.includes('validateCredentials') },
                        { name: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª', test: html.includes('adminSession') }
                    ];
                    
                    let passedTests = 0;
                    checks.forEach(check => {
                        if (check.test) {
                            this.addTestResult(`âœ… ${check.name}: Ù…ÙˆØ¬ÙˆØ¯`, 'success');
                            passedTests++;
                        } else {
                            this.addTestResult(`âŒ ${check.name}: Ù…ÙÙ‚ÙˆØ¯`, 'error');
                        }
                    });
                    
                    const score = Math.round((passedTests / checks.length) * 100);
                    this.addTestResult(`ğŸ“Š Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: ${score}% (${passedTests}/${checks.length})`, 
                        score >= 80 ? 'success' : score >= 60 ? 'warning' : 'error');
                    
                } catch (error) {
                    this.addTestResult(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: ${error.message}`, 'error');
                }
            }
            
            testAuthSystem() {
                this.addTestResult('Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©...', 'warning');
                
                try {
                    // Ù…Ø­Ø§ÙƒØ§Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
                    const testCredentials = {
                        username: 'admin',
                        password: 'admin123'
                    };
                    
                    // ÙØ­Øµ localStorage
                    const hasLocalStorage = typeof(Storage) !== "undefined";
                    this.addTestResult(hasLocalStorage ? 'âœ… LocalStorage Ù…ØªØ§Ø­' : 'âŒ LocalStorage ØºÙŠØ± Ù…ØªØ§Ø­', 
                        hasLocalStorage ? 'success' : 'error');
                    
                    // ÙØ­Øµ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
                    const savedCredentials = localStorage.getItem('adminCredentials');
                    if (savedCredentials) {
                        this.addTestResult('âœ… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ù…Ø­ÙÙˆØ¸Ø©', 'success');
                        
                        try {
                            const credentials = JSON.parse(savedCredentials);
                            this.addTestResult(`âœ… Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${credentials.username}`, 'success');
                        } catch (e) {
                            this.addTestResult('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯', 'error');
                        }
                    } else {
                        this.addTestResult('âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø¹ØªÙ…Ø§Ø¯ Ù…Ø­ÙÙˆØ¸Ø©', 'warning');
                    }
                    
                    // ÙØ­Øµ Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                    const currentSession = localStorage.getItem('adminSession');
                    if (currentSession) {
                        try {
                            const session = JSON.parse(currentSession);
                            const sessionAge = Date.now() - session.loginTime;
                            const sessionHours = Math.round(sessionAge / (1000 * 60 * 60));
                            
                            this.addTestResult(`âœ… Ø¬Ù„Ø³Ø© Ù†Ø´Ø·Ø© Ù…Ù†Ø° ${sessionHours} Ø³Ø§Ø¹Ø©`, 'success');
                        } catch (e) {
                            this.addTestResult('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø©', 'error');
                        }
                    } else {
                        this.addTestResult('â„¹ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ù„Ø³Ø© Ù†Ø´Ø·Ø©', 'warning');
                    }
                    
                } catch (error) {
                    this.addTestResult(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©: ${error.message}`, 'error');
                }
            }
            
            testCredentials() {
                this.addTestResult('Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„...', 'warning');
                
                // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ´ÙÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (Ù†ÙØ³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…)
                function hashPassword(password) {
                    let hash = 0;
                    for (let i = 0; i < password.length; i++) {
                        const char = password.charCodeAt(i);
                        hash = ((hash << 5) - hash) + char;
                        hash = hash & hash;
                    }
                    return hash.toString();
                }
                
                const defaultPassword = 'admin123';
                const hashedPassword = hashPassword(defaultPassword);
                
                this.addTestResult(`âœ… ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©: ${defaultPassword}`, 'success');
                this.addTestResult(`âœ… ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø´ÙØ±Ø©: ${hashedPassword}`, 'success');
                
                // ÙØ­Øµ Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                const passwordStrength = this.checkPasswordStrength(defaultPassword);
                this.addTestResult(`ğŸ“Š Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${passwordStrength.score}/5`, 
                    passwordStrength.score >= 3 ? 'success' : 'warning');
                
                passwordStrength.suggestions.forEach(suggestion => {
                    this.addTestResult(`ğŸ’¡ Ø§Ù‚ØªØ±Ø§Ø­: ${suggestion}`, 'warning');
                });
            }
            
            testSession() {
                this.addTestResult('Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª...', 'warning');
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©
                const testSession = {
                    username: 'admin',
                    loginTime: Date.now(),
                    sessionId: Math.random().toString(36).substring(2, 15)
                };
                
                try {
                    // Ø­ÙØ¸ Ø§Ù„Ø¬Ù„Ø³Ø©
                    localStorage.setItem('testSession', JSON.stringify(testSession));
                    this.addTestResult('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©', 'success');
                    
                    // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¬Ù„Ø³Ø©
                    const retrievedSession = localStorage.getItem('testSession');
                    if (retrievedSession) {
                        const session = JSON.parse(retrievedSession);
                        this.addTestResult(`âœ… ØªÙ… Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø©: ${session.sessionId}`, 'success');
                    }
                    
                    // Ø­Ø°Ù Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
                    localStorage.removeItem('testSession');
                    this.addTestResult('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©', 'success');
                    
                } catch (error) {
                    this.addTestResult(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¬Ù„Ø³Ø©: ${error.message}`, 'error');
                }
            }
            
            checkPasswordStrength(password) {
                let score = 0;
                const suggestions = [];
                
                if (password.length >= 8) score++;
                else suggestions.push('Ø§Ø³ØªØ®Ø¯Ù… 8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                
                if (/[a-z]/.test(password)) score++;
                else suggestions.push('Ø£Ø¶Ù Ø£Ø­Ø±Ù ØµØºÙŠØ±Ø©');
                
                if (/[A-Z]/.test(password)) score++;
                else suggestions.push('Ø£Ø¶Ù Ø£Ø­Ø±Ù ÙƒØ¨ÙŠØ±Ø©');
                
                if (/[0-9]/.test(password)) score++;
                else suggestions.push('Ø£Ø¶Ù Ø£Ø±Ù‚Ø§Ù…');
                
                if (/[^A-Za-z0-9]/.test(password)) score++;
                else suggestions.push('Ø£Ø¶Ù Ø±Ù…ÙˆØ² Ø®Ø§ØµØ©');
                
                return { score, suggestions };
            }
            
            loadSystemInfo() {
                const systemInfo = {
                    userAgent: navigator.userAgent,
                    language: navigator.language,
                    platform: navigator.platform,
                    cookieEnabled: navigator.cookieEnabled,
                    onLine: navigator.onLine,
                    localStorage: typeof(Storage) !== "undefined",
                    sessionStorage: typeof(sessionStorage) !== "undefined",
                    currentTime: new Date().toLocaleString('ar-SA'),
                    url: window.location.href
                };
                
                let infoText = 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…:\n\n';
                Object.entries(systemInfo).forEach(([key, value]) => {
                    infoText += `${key}: ${value}\n`;
                });
                
                document.getElementById('system-details').textContent = infoText;
            }
            
            addTestResult(message, type) {
                const resultsContainer = document.getElementById('test-results');
                const resultElement = document.createElement('div');
                resultElement.className = `test-result ${type}`;
                
                const icon = type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'âš ï¸';
                
                resultElement.innerHTML = `
                    <span class="test-icon">${icon}</span>
                    <div>
                        <strong>${message}</strong>
                        <div style="font-size: 0.9rem; color: #666; margin-top: 0.25rem;">
                            ${new Date().toLocaleTimeString('ar-SA')}
                        </div>
                    </div>
                `;
                
                resultsContainer.appendChild(resultElement);
                
                // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ø£Ø³ÙÙ„
                resultElement.scrollIntoView({ behavior: 'smooth' });
            }
        }
        
        // Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¹Ø§Ù…Ø©
        function testLoginForm() {
            window.loginTester.testLoginForm();
        }
        
        function testAuthSystem() {
            window.loginTester.testAuthSystem();
        }
        
        function testCredentials() {
            window.loginTester.testCredentials();
        }
        
        function testSession() {
            window.loginTester.testSession();
        }
        
        function openLogin() {
            window.open('./login.html', '_blank');
        }
        
        function openDashboard() {
            window.open('./dashboard.html', '_blank');
        }
        
        function clearSession() {
            localStorage.removeItem('adminSession');
            localStorage.removeItem('adminCredentials');
            alert('ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø©');
        }
        
        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…
        document.addEventListener('DOMContentLoaded', function() {
            window.loginTester = new LoginTester();
        });
    </script>
</body>
</html>
